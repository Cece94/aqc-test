generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model defect_types {
  id          Int       @id @default(autoincrement())
  code        String    @unique
  description String
  defects     defects[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model defects {
  id             Int          @id @default(autoincrement())
  roll_id        Int
  defect_type_id Int
  position_m     Decimal      @db.Decimal(6, 2)
  severity       Int
  notes          String?
  defect_types   defect_types @relation(fields: [defect_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  rolls          rolls        @relation(fields: [roll_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model rolls {
  id          Int       @id @default(autoincrement())
  roll_code   String    @unique
  material    String
  width_mm    Int
  length_m    Int
  produced_at DateTime  @default(now()) @db.Timestamptz(6)
  defects     defects[]
}
